import{a as C,r as p,j as e}from"./index-Dz2LKTib.js";import{C as f,a as k}from"./Card-CBGbtaDN.js";import{T as S,C as D}from"./Table-VFwCZ_-6.js";import{B as x}from"./Button-C4WQrzF6.js";import{a as I}from"./useFirestore-CGlNlAFc.js";import{T as z}from"./trending-up-tieyKBCH.js";import{T as w}from"./trending-down-CHIBUZMF.js";import{E as M}from"./eye-B6jJmUvu.js";import{c as h}from"./createLucideIcon-CZPXBe3C.js";import{X as v}from"./x-circle-D-NmHiuO.js";import{U as A,A as L}from"./AddInvestorModal-C8HuzpYa.js";import"./user-InAlZBAA.js";import"./firestoreService-CvbnsnDf.js";import"./Modal-DNdioqGQ.js";import"./banknote-D6Yr1a8K.js";import"./map-pin-BjU4CWNo.js";import"./shield-DlyMza9w.js";import"./building-B6xNHryw.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=h("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=h("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=h("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),U=()=>{const l=C(),{investors:a,loading:u,error:j}=I(),[c,N]=p.useState("name"),[o,g]=p.useState("asc"),d=t=>{c===t?g(o==="asc"?"desc":"asc"):(N(t),g("asc"))},y=[...a].sort((t,s)=>{const r=t[c],n=s[c];return typeof r=="string"&&typeof n=="string"?o==="asc"?r.localeCompare(n):n.localeCompare(r):typeof r=="number"&&typeof n=="number"?o==="asc"?r-n:n-r:0}),m=({field:t})=>c!==t?null:o==="asc"?e.jsx($,{size:16,className:"ml-1"}):e.jsx(T,{size:16,className:"ml-1"}),b=[{key:"name",header:e.jsxs("button",{onClick:()=>d("name"),className:"flex items-center hover:text-purple-600 font-medium",children:["Name ",e.jsx(m,{field:"name"})]}),render:(t,s)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-medium text-sm",children:t.split(" ").map(r=>r[0]).join("").slice(0,2)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:t}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",s.id.slice(-8)]})]})]})},{key:"country",header:"Country",render:(t,s)=>e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-800",children:s.country})})},{key:"currentBalance",header:e.jsxs("button",{onClick:()=>d("currentBalance"),className:"flex items-center hover:text-purple-600 font-medium",children:["Current Balance ",e.jsx(m,{field:"currentBalance"})]}),align:"right",render:t=>e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-lg text-gray-800",children:["$",(t==null?void 0:t.toLocaleString())||"0"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"USD"})]})},{key:"earnings",header:e.jsxs("button",{onClick:()=>d("earnings"),className:"flex items-center hover:text-purple-600 font-medium",children:["Performance ",e.jsx(m,{field:"earnings"})]}),align:"right",render:(t,s)=>{const r=s.currentBalance-s.initialDeposit,n=r>=0,i=s.initialDeposit>0?r/s.initialDeposit*100:0;return e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end mb-1",children:[n?e.jsx(z,{size:14,className:"mr-1 text-green-500"}):e.jsx(w,{size:14,className:"mr-1 text-red-500"}),e.jsxs("span",{className:`font-medium ${n?"text-green-600":"text-red-600"}`,children:[n?"+":"","$",r.toLocaleString()]})]}),e.jsxs("p",{className:`text-xs ${n?"text-green-600":"text-red-600"}`,children:[n?"+":"",i.toFixed(1),"%"]})]})}},{key:"accountStatus",header:"Status",render:t=>{const s=t||"Active";let r="bg-green-100",n="text-green-800",i=e.jsx(D,{size:12});return s.includes("Restricted")?(r="bg-amber-100",n="text-amber-800",i=e.jsx(v,{size:12})):s.includes("Closed")&&(r="bg-red-100",n="text-red-800",i=e.jsx(v,{size:12})),e.jsx("div",{className:"space-y-1",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs rounded-full ${r} ${n}`,children:[i,e.jsx("span",{className:"ml-1",children:s.length>15?s.substring(0,15)+"...":s})]})})}},{key:"joinDate",header:e.jsxs("button",{onClick:()=>d("joinDate"),className:"flex items-center hover:text-purple-600 font-medium",children:["Join Date ",e.jsx(m,{field:"joinDate"})]}),render:t=>e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-800",children:new Date(t).toLocaleDateString()}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Math.floor((new Date().getTime()-new Date(t).getTime())/(1e3*60*60*24))," days ago"]})]})},{key:"actions",header:"Actions",align:"center",render:(t,s)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>l(`/admin/investor/${s.id}`),children:[e.jsx(M,{size:14,className:"mr-1"})," View"]}),e.jsxs(x,{variant:"primary",size:"sm",onClick:()=>l(`/admin/investor/${s.id}`),children:[e.jsx(B,{size:14,className:"mr-1"})," Edit"]})]})}];return j?e.jsx(f,{title:"Investors Management",className:"overflow-hidden",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-600",children:j}),e.jsx(x,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]})}):e.jsxs(f,{title:"Investors Management",className:"overflow-hidden",children:[e.jsx(S,{columns:b,data:y,isLoading:u,emptyMessage:"No investors found"}),!u&&a.length>0&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-xl",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Active Investors"}),e.jsx("p",{className:"font-bold text-green-600 text-lg",children:a.filter(t=>{var s;return!((s=t.accountStatus)!=null&&s.includes("Closed"))}).length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Restricted Accounts"}),e.jsx("p",{className:"font-bold text-amber-600 text-lg",children:a.filter(t=>{var s;return(s=t.accountStatus)==null?void 0:s.includes("Restricted")}).length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Closed Accounts"}),e.jsx("p",{className:"font-bold text-red-600 text-lg",children:a.filter(t=>{var s;return(s=t.accountStatus)==null?void 0:s.includes("Closed")}).length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"Total AUM"}),e.jsxs("p",{className:"font-bold text-purple-600 text-lg",children:["$",a.reduce((t,s)=>t+s.currentBalance,0).toLocaleString()]})]})]})})]})},se=()=>{const[l,a]=p.useState(!1);return e.jsxs(k,{title:"Investors",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Investor Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage investor profiles, add new investors, and monitor performance"})]}),e.jsxs(x,{variant:"primary",onClick:()=>a(!0),children:[e.jsx(A,{size:18,className:"mr-2"}),"Add Investor"]})]}),e.jsx(U,{}),e.jsx(L,{isOpen:l,onClose:()=>a(!1),onSuccess:()=>{a(!1),window.location.reload()}})]})};export{se as default};
